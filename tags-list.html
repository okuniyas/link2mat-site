<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Tag List / タグ一覧</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
        margin: 0;
        padding: 32px 20px;
        background: #ffffff;
        color: #111111;
      }
      .container {
        max-width: 900px;
        margin: 0 auto;
      }
      h1 {
        font-size: 28px;
        margin: 0 0 8px;
      }
      h2 {
        font-size: 18px;
        margin: 24px 0 8px;
      }
      p {
        line-height: 1.6;
        margin: 12px 0;
      }
      .muted {
        color: #4b5563;
        font-size: 13px;
      }
      .search {
        margin-top: 16px;
        margin-bottom: 12px;
      }
      input {
        width: 100%;
        padding: 10px 12px;
        border: 1px solid #e5e7eb;
        border-radius: 10px;
        font-size: 14px;
      }
      .count {
        margin-top: 6px;
        font-size: 13px;
        color: #6b7280;
      }
      .section {
        border-top: 1px solid #e5e7eb;
        padding-top: 16px;
        margin-top: 16px;
      }
      .tag {
        padding: 10px 12px;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        margin: 8px 0;
        background: #f9fafb;
      }
      .tag-title {
        font-weight: 700;
      }
      .tag-title a {
        color: #111111;
        text-decoration: none;
      }
      .tag-title a:hover {
        text-decoration: underline;
      }
      .tag-en {
        color: #6b7280;
        font-size: 13px;
        margin-left: 6px;
        text-decoration: none;
      }
      .tag-alt {
        color: #6b7280;
        font-size: 13px;
        margin-left: 6px;
      }
      .tag-en:hover {
        text-decoration: underline;
      }
      .tag-meta {
        color: #6b7280;
        font-size: 12px;
        margin-top: 6px;
      }
      .bilingual {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 16px;
        align-items: start;
      }
      .bilingual > div > p:first-child {
        margin-top: 0;
      }
      @media (max-width: 860px) {
        .bilingual {
          grid-template-columns: 1fr;
        }
      }
      a {
        color: #2563eb;
      }
      .lang-switcher { display: flex; flex-wrap: wrap; gap: 8px; margin: 12px 0 20px; align-items: center; }
      .lang-switcher span { font-size: 13px; color: #4b5563; margin-right: 4px; }
      .lang-btn { padding: 6px 12px; border: 1px solid #e5e7eb; border-radius: 8px; background: #fff; font-size: 14px; cursor: pointer; color: #374151; }
      .lang-btn:hover { background: #f9fafb; border-color: #d1d5db; }
      .lang-btn.active { background: #2563eb; border-color: #2563eb; color: #fff; }
      .lang-block { display: none; }
      .lang-block.lang-visible { display: block; }
      body[data-lang] .bilingual { grid-template-columns: 1fr; }
      body[data-lang] .bilingual .lang-block.lang-visible { display: block; }
      body[data-lang] .bilingual .lang-block:not(.lang-visible) { display: none; }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 class="lang-block lang-visible" data-lang="en">Tag List</h1>
      <h1 class="lang-block" data-lang="ja">タグ一覧</h1>
      <h1 class="lang-block" data-lang="ko">태그 목록</h1>
      <h1 class="lang-block" data-lang="pt">Lista de tags</h1>
      <h1 class="lang-block" data-lang="es">Lista de etiquetas</h1>
      <h1 class="lang-block" data-lang="fr">Liste des tags</h1>
      <p class="lang-block lang-visible muted" data-lang="en"><strong>Last updated:</strong> 2026-01-29</p>
      <p class="lang-block muted" data-lang="ja"><strong>更新日:</strong> 2026-01-29</p>
      <p class="lang-block muted" data-lang="ko"><strong>최종 업데이트:</strong> 2026-01-29</p>
      <p class="lang-block muted" data-lang="pt"><strong>Última atualização:</strong> 2026-01-29</p>
      <p class="lang-block muted" data-lang="es"><strong>Última actualización:</strong> 2026-01-29</p>
      <p class="lang-block muted" data-lang="fr"><strong>Dernière mise à jour:</strong> 2026-01-29</p>

      <div class="lang-switcher" role="group" aria-label="Language / 言語">
        <span class="lang-label">Language / 言語:</span>
        <button type="button" class="lang-btn active" data-lang="en" aria-pressed="true">English</button>
        <button type="button" class="lang-btn" data-lang="ja" aria-pressed="false">日本語</button>
        <button type="button" class="lang-btn" data-lang="ko" aria-pressed="false">한국어</button>
        <button type="button" class="lang-btn" data-lang="pt" aria-pressed="false">Português</button>
        <button type="button" class="lang-btn" data-lang="es" aria-pressed="false">Español</button>
        <button type="button" class="lang-btn" data-lang="fr" aria-pressed="false">Français</button>
      </div>

      <div class="bilingual">
        <div class="lang-block lang-visible" data-lang="en">
          <p>
            Use the search box to filter tags. Tags are grouped into Position, Scenario, Setup, Action,
            Submission, and Source categories.
          </p>
        </div>
        <div class="lang-block" data-lang="ja">
          <p>
            検索欄でタグを絞り込みできます。タグはポジション / シナリオ / セットアップ /
            アクション / サブミッション / ソースのカテゴリで整理しています。
          </p>
        </div>
        <div class="lang-block" data-lang="ko">
          <p>
            검색창으로 태그를 필터링할 수 있습니다. 태그는 포지션, 시나리오, 셋업, 액션, 서브미션, 소스 카테고리로 구분됩니다.
          </p>
        </div>
        <div class="lang-block" data-lang="pt">
          <p>
            Use a caixa de pesquisa para filtrar tags. As tags estão agrupadas nas categorias Posição, Cenário, Preparação, Ação, Finalização e Fonte.
          </p>
        </div>
        <div class="lang-block" data-lang="es">
          <p>
            Usa el cuadro de búsqueda para filtrar etiquetas. Las etiquetas se agrupan en las categorías Posición, Escenario, Preparación, Acción, Finalización y Fuente.
          </p>
        </div>
        <div class="lang-block" data-lang="fr">
          <p>
            Utilisez la zone de recherche pour filtrer les tags. Les tags sont regroupés en catégories : Position, Scénario, Préparation, Action, Soumission et Source.
          </p>
        </div>
      </div>

      <div class="search">
        <input id="searchInput" type="text" placeholder="Search tags / タグ検索" />
        <div id="count" class="count"></div>
      </div>

      <div id="list"></div>

      <div class="bilingual">
        <div class="lang-block lang-visible" data-lang="en">
          <p class="muted">
            For specific tag requests, use the in-app request form. For general tag policy or structure,
            email support. <a href="index.html">Support page</a>
          </p>
        </div>
        <div class="lang-block" data-lang="ja">
          <p class="muted">
            個別のタグの追加・変更はアプリから、Tag 全般のご要望はサポートメールへお願いします。
            <a href="index.html">サポートページ</a>
          </p>
        </div>
        <div class="lang-block" data-lang="ko">
          <p class="muted">
            개별 태그 추가·변경은 앱에서, 태그 전반 관련 요청은 지원 이메일로 문의해 주세요.
            <a href="index.html">지원 페이지</a>
          </p>
        </div>
        <div class="lang-block" data-lang="pt">
          <p class="muted">
            Para pedidos de tags específicos, use o formulário no app. Para política ou estrutura geral, envie e-mail para o suporte. <a href="index.html">Página de suporte</a>
          </p>
        </div>
        <div class="lang-block" data-lang="es">
          <p class="muted">
            Para solicitudes de etiquetas específicas, usa el formulario en la app. Para política o estructura general, escribe al soporte. <a href="index.html">Página de soporte</a>
          </p>
        </div>
        <div class="lang-block" data-lang="fr">
          <p class="muted">
            Pour des demandes de tags spécifiques, utilisez le formulaire dans l'app. Pour la politique ou la structure générale, contactez le support par e-mail. <a href="index.html">Page d'assistance</a>
          </p>
        </div>
      </div>
      <div class="bilingual">
        <div class="lang-block lang-visible" data-lang="en">
          <p class="muted">
            We welcome suggestions about the tag system. Jiu-jitsu evolves daily, and we believe more
            community knowledge makes this better. At the same time, we want to keep tags understandable,
            so we will balance clarity and coverage. We would be grateful for advice from experienced
            jiu-jitsu practitioners. For specific tag requests, use the in-app request; for overall policy,
            email support.
          </p>
        </div>
        <div class="lang-block" data-lang="ja">
          <p class="muted">
            Tag の構成や追加・変更のご要望も歓迎しています。柔術は日々進化していますし、多くの方の知見が入るとさらに良くなると感じています。
            ただし、構成が複雑になりすぎないようバランスを見ながら進めたいと考えています。
            柔術家の先輩方にご助言いただけるとありがたいと考えています。
            個別のタグについての追加・変更はアプリからお送りいただくのが便利です。Tag 全般の方針や構成へのご要望はサポートメールまでお願いします。
          </p>
        </div>
        <div class="lang-block" data-lang="ko">
          <p class="muted">
            태그 시스템에 대한 제안을 환영합니다. 주짓수는 매일 진화하며, 커뮤니티 지식이 많을수록 더 좋아진다고 믿습니다. 동시에 태그를 이해하기 쉽게 유지하고자 명확성과 커버리지의 균형을 맞추겠습니다. 경험 많은 주짓수 수련자들의 조언에 감사드립니다. 개별 태그 요청은 앱 내 요청을, 전반적인 정책은 이메일로 문의해 주세요.
          </p>
        </div>
        <div class="lang-block" data-lang="pt">
          <p class="muted">
            Aceitamos sugestões sobre o sistema de tags. O jiu-jitsu evolui diariamente e acreditamos que mais conhecimento da comunidade melhora o sistema. Ao mesmo tempo, queremos manter as tags compreensíveis, equilibrando clareza e cobertura. Agradecemos conselhos de praticantes experientes. Para pedidos específicos, use o formulário no app; para política geral, envie e-mail ao suporte.
          </p>
        </div>
        <div class="lang-block" data-lang="es">
          <p class="muted">
            Aceptamos sugerencias sobre el sistema de etiquetas. El jiu-jitsu evoluciona cada día y creemos que más conocimiento de la comunidad lo mejora. Al mismo tiempo, queremos mantener las etiquetas comprensibles, equilibrando claridad y cobertura. Agradecemos consejos de practicantes experimentados. Para solicitudes específicas, usa el formulario en la app; para política general, escribe al soporte.
          </p>
        </div>
        <div class="lang-block" data-lang="fr">
          <p class="muted">
            Nous accueillons les suggestions sur le système de tags. Le jiu-jitsu évolue chaque jour et nous pensons que les connaissances de la communauté l'améliorent. Nous voulons garder les tags compréhensibles en équilibrant clarté et couverture. Nous serions reconnaissants des conseils de pratiquants expérimentés. Pour des demandes spécifiques, utilisez le formulaire dans l'app ; pour la politique générale, contactez le support par e-mail.
          </p>
        </div>
      </div>
      <p class="lang-block lang-visible muted" data-lang="en">© 2026 Link2Mat. Site content (text, layout) is protected.</p>
      <p class="lang-block muted" data-lang="ja">© 2026 Link2Mat. 本サイトの文章・構成の著作権を保護します。</p>
      <p class="lang-block muted" data-lang="ko">© 2026 Link2Mat. 사이트 내용(텍스트, 구성)은 보호됩니다.</p>
      <p class="lang-block muted" data-lang="pt">© 2026 Link2Mat. Todos os direitos reservados.</p>
      <p class="lang-block muted" data-lang="es">© 2026 Link2Mat. Todos los derechos reservados.</p>
      <p class="lang-block muted" data-lang="fr">© 2026 Link2Mat. Tous droits réservés.</p>
    </div>

    <script>
      (function () {
        const STORAGE_KEY = "link2mat-support-lang";
        const supported = ["en", "ja", "ko", "pt", "es", "fr"];
        const langButtons = document.querySelectorAll(".lang-btn");
        const langBlocks = document.querySelectorAll(".lang-block");

        function detectBrowserLang() {
          const list = navigator.languages && navigator.languages.length ? navigator.languages : [navigator.language || navigator.userLanguage || "en"];
          for (let i = 0; i < list.length; i++) {
            const code = (list[i] || "").toLowerCase().split("-")[0];
            if (supported.indexOf(code) !== -1) return code;
          }
          return "en";
        }

        function resolveLang() {
          try {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved && supported.indexOf(saved) !== -1) return saved;
          } catch (e) {}
          const params = new URLSearchParams(window.location.search);
          const raw = String(params.get("lang") || "").toLowerCase();
          if (raw.startsWith("ja")) return "ja";
          if (raw.startsWith("ko")) return "ko";
          if (raw.startsWith("pt")) return "pt";
          if (raw.startsWith("es")) return "es";
          if (raw.startsWith("fr")) return "fr";
          if (raw.startsWith("en")) return "en";
          return detectBrowserLang();
        }

        function setLang(lang) {
          document.body.setAttribute("data-lang", lang);
          langBlocks.forEach(function (el) {
            el.classList.toggle("lang-visible", el.getAttribute("data-lang") === lang);
          });
          langButtons.forEach(function (btn) {
            const on = btn.getAttribute("data-lang") === lang;
            btn.classList.toggle("active", on);
            btn.setAttribute("aria-pressed", on ? "true" : "false");
          });
          try { localStorage.setItem(STORAGE_KEY, lang); } catch (e) {}
        }

        langButtons.forEach(function (btn) {
          btn.addEventListener("click", function () { setLang(btn.getAttribute("data-lang")); });
        });

        const lang = resolveLang();
        setLang(lang);

      const categoryLabels =
        lang === "ja"
          ? {
              Position: "ポジション",
              Scenario: "シナリオ",
              Prerequisite: "セットアップ",
              Action: "アクション",
              Submission: "極め",
              Source: "ソース",
            }
          : lang === "ko"
            ? {
                Position: "포지션",
                Scenario: "시나리오",
                Prerequisite: "셋업",
                Action: "액션",
                Submission: "서브미션",
                Source: "소스",
              }
            : lang === "pt"
              ? {
                  Position: "Posição",
                  Scenario: "Cenário",
                  Prerequisite: "Preparação",
                  Action: "Ação",
                  Submission: "Finalização",
                  Source: "Fonte",
                }
              : lang === "es"
                ? {
                    Position: "Posición",
                    Scenario: "Escenario",
                    Prerequisite: "Preparación",
                    Action: "Acción",
                    Submission: "Finalización",
                    Source: "Fuente",
                  }
                : lang === "fr"
                  ? {
                      Position: "Position",
                      Scenario: "Scénario",
                      Prerequisite: "Préparation",
                      Action: "Action",
                      Submission: "Soumission",
                      Source: "Source",
                    }
                  : {
                      Position: "Position",
                      Scenario: "Scenario",
                      Prerequisite: "Setup",
                      Action: "Action",
                      Submission: "Submission",
                      Source: "Source",
                    };

      const list = document.getElementById("list");
      const count = document.getElementById("count");
      const input = document.getElementById("searchInput");
      const placeholders = {
        ja: "タグ検索",
        en: "Search tags",
        ko: "태그 검색",
        pt: "Pesquisar tags",
        es: "Buscar etiquetas",
        fr: "Rechercher des tags",
      };
      const countLabels = {
        ja: "件",
        en: "tags",
        ko: "개",
        pt: "tags",
        es: "etiquetas",
        fr: "tags",
      };
      input.placeholder = `${placeholders[lang] || placeholders.en} / Tag`;

      const normalize = (value) => value.toLowerCase().trim();
      const getLabels = (tag) => (tag.labels && typeof tag.labels === "object" ? tag.labels : {});
      const getAliasesByLocale = (tag) =>
        tag.aliasesByLocale && typeof tag.aliasesByLocale === "object" ? tag.aliasesByLocale : {};
      const resolveLabel = (tag) => {
        const labels = getLabels(tag);
        return (
          labels[lang] ||
          (lang === "ja" ? tag.canonicalJa : tag.canonicalEn) ||
          tag.canonicalJa ||
          tag.canonicalEn ||
          tag.tagId
        );
      };
      const resolveAltLabel = (tag, primary) => {
        const labels = getLabels(tag);
        const alt =
          lang === "ja"
            ? labels.en || tag.canonicalEn
            : labels.ja || tag.canonicalJa;
        if (!alt || alt === primary) return "";
        return alt;
      };
      const resolveAliases = (tag) => {
        const byLocale = getAliasesByLocale(tag);
        if (Array.isArray(byLocale[lang]) && byLocale[lang].length) return byLocale[lang];
        if (Array.isArray(tag.aliases) && tag.aliases.length) return tag.aliases;
        const merged = Object.values(byLocale).flat();
        return merged.filter((value) => typeof value === "string" && value.trim());
      };
      const collectSearchText = (tag) => {
        const labels = Object.values(getLabels(tag));
        const byLocale = Object.values(getAliasesByLocale(tag)).flat();
        return [
          tag.canonicalJa,
          tag.canonicalEn,
          ...labels,
          ...(tag.aliases || []),
          ...byLocale,
        ]
          .filter(Boolean)
          .join(" ");
      };

      const render = (tags, query) => {
        list.innerHTML = "";
        const q = normalize(query || "");
        const filtered = tags.filter((tag) => {
          if (!q) return true;
          return normalize(collectSearchText(tag)).includes(q);
        });

        const unit = countLabels[lang] || countLabels.en;
        count.textContent = `${filtered.length} ${unit}`;

        const byCategory = new Map();
        for (const tag of filtered) {
          const key = tag.category || "Other";
          if (!byCategory.has(key)) byCategory.set(key, []);
          byCategory.get(key).push(tag);
        }

        const order = [
          "Position",
          "Scenario",
          "Prerequisite",
          "Action",
          "Submission",
          "Source",
          "Other",
        ];
        for (const key of order) {
          if (!byCategory.has(key)) continue;
          const section = document.createElement("div");
          section.className = "section";
          const title = document.createElement("h2");
          title.textContent = categoryLabels[key] || key;
          section.appendChild(title);

          for (const tag of byCategory.get(key)) {
            const item = document.createElement("div");
            item.className = "tag";
            const heading = document.createElement("div");
            heading.className = "tag-title";
            const link = document.createElement("a");
            link.href = `tags-detail.html?id=${encodeURIComponent(tag.tagId)}&lang=${encodeURIComponent(
              lang
            )}`;
            const primary = resolveLabel(tag);
            link.textContent = primary;
            heading.appendChild(link);

            const alt = resolveAltLabel(tag, primary);
            if (alt) {
              const altSpan = document.createElement("span");
              altSpan.className = "tag-alt";
              altSpan.textContent = `(${alt})`;
              heading.appendChild(altSpan);
            }

            const meta = document.createElement("div");
            meta.className = "tag-meta";
            const aliasText = resolveAliases(tag).join(", ");
            meta.textContent = aliasText ? `Aliases: ${aliasText}` : "";

            item.appendChild(heading);
            if (meta.textContent) item.appendChild(meta);
            section.appendChild(item);
          }

          list.appendChild(section);
        }
      };

      fetch("tags-data.json")
        .then((res) => res.json())
        .then((data) => {
          const tags = data.tags || [];
          render(tags, "");
          input.addEventListener("input", () => render(tags, input.value));
        })
        .catch(() => {
          list.innerHTML = "<p>Failed to load tag list.</p>";
        });

      })();
    </script>
  </body>
</html>
